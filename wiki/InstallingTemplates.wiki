#summary How to install templates downloaded from this project

This page explains how to install and use the pre-built templates that ship with this project.  If the templates are not exactly what you need, see CustomizingTemplates.

The following instructions assume you have the necessary privileges to make changes to your Cacti server.  You probably need to become root on that server.

==Downloading==

You can download the templates from the Downloads tab of the Google Code project, at http://code.google.com/p/mysql-cacti-templates/downloads/list.  Get the latest released version.  You will need to get a copy of the scripts on the server, and you need access to the templates locally, so you can import them through your web browser:

  # Browse to http://code.google.com/p/mysql-cacti-templates/downloads/list
  # Download the file to your local machine's hard drive.
  # Right-click on the latest release and copy the location of the file to download.
  # Either log in to your Cacti server at the command prompt and use `wget` to download the same release to the server, or copy the downloaded release there with ftp, scp, or similar.

Let's assume you have just downloaded version 1.1.4, in better-cacti-templates-1.1.4.tar.gz.  Unpack the archive with the following command at a command prompt:

{{{
root@cactiserver# tar zxf better-cacti-templates-1.1.4.tar.gz
}}}

Repeat the same process on your local computer.  You should now have a directory named better-cacti-templates-1.1.4, containing several files.  (The directory name will change with each new release).  Change into this directory:

{{{
root@cactiserver# cd better-cacti-templates-1.1.4
}}}

==Installing==

Before you install, read the specific instructions for the templates you plan to install.  These are linked in the table of contents at the left side of this page.

The general process is to copy the data-gathering scripts into place, and then to import the templates via the web interface.

Copy the PHP scripts into your Cacti installation's scripts directory, on the server that hosts Cacti.  This is usually `/usr/share/cacti/site/scripts/`, but might be different on your system.  Let's assume you want to install the MySQL templates.

{{{
root@cactiserver# cp ss_get_mysql_stats.php /usr/share/cacti/site/scripts
}}}

Now import the template files through your web browser.  In the Cacti web interface's Console tab, click on the *Import Templates* link in the left sidebar.  Browse to the directory containing the unpacked templates, and select the XML file for the templates you're installing, and submit the form.  In our example, the file will be named something like `cacti_host_template_x_mysql_server_ht_0.8.6i.xml`.

Inspect the page that results.  You should see something like the following:

{{{
Cacti has imported the following items:

CDEF
[success] X Negate CDEF [create]

GPRINT Preset
[success] X MySQL Server Version t1.1.4:s1.1.4 [create]
[success] X Normal [create]

Data Input Method
[success] X Get MySQL Stats/MyISAM Indexes IM [create]
... snip ...

Data Template
[success] X MyISAM Indexes DT [create]
... snip ...

Graph Template
[success] X MyISAM Indexes GT [create]
... snip ...

Host Template
[success] X MySQL Server HT [create]
}}}

The above is an abbreviated list.  Every line should show "success" at the beginning, and "create" (or "update" if you're upgrading) at the end.

==Configuring==

The templates themselves don't need to be configured, but you might need to configure the scripts that they execute to gather their data.  For example, you might need to specify a username and password to connect to MySQL and gather statistics.  There are several ways to do this.

===Embedding Configuration===

The simplest way is to embed the configuration options in the script file itself.  Open up the script file (such as ss_get_mysql_stats.php) with your favorite text editor, and look for a section like the following:

{{{
# ============================================================================
# CONFIGURATION
# ============================================================================
# Define MySQL connection constants in config.php.  Arguments explicitly passed
# in from Cacti will override these.  However, if you leave them blank in Cacti
# and set them here, you can make life easier.  Instead of defining parameters
# here, you can define them in another file named the same as this file, with a
# .cnf extension.
# ============================================================================
$mysql_user = 'cactiuser';
$mysql_pass = 'cactiuser';
$mysql_port = 3306;
... [snip]...
}}}

Each PHP file has its own configuration options, and there should be comments that explain them.  In the above example, the options are MySQL connection options.  Change them as desired, and save and close the PHP file.

This method this has some disadvantages.  If you upgrade the PHP script file, you'll lose your configuration.  And this only works if all of your monitored resources need the same configuration parameters.

===A Configuration File===

If you don't want to store the configuration options directly into the PHP script file, you can create another file with the same name and the filename extension `.cnf`.  Place this in the same directory as the PHP script file, and ensure it is valid PHP.  This file will be included by the PHP script file, so you can define the same configuration options there that you might define in the PHP script file.  For example, you might create ss_get_mysql_stats.php.cnf with the following contents:

{{{
<?php
mysql_user = "root";
mysql_pass = "s3cret";
?>
}}}

Notice the opening and closing PHP tags.

This method still has the disadvantage that it works only if you use the same global configuration for every monitored resource.  If you need to specify a username and password for each host or each graph, it won't work.

===Passing Command-Line Arguments===

TODO

==Creating Graphs==

Creating graphs is the easiest step of the process.

  # In Cacti's Console tab, browse to the "Devices" link in the sidebar and click on the device you'd like to graph.
  # The third item from the top of the screen should say *Host Template*.  Change this to the name of the template you imported, such as "X MySQL Server HT."
  # Scroll to the bottom of the page and click the Save button.
  # After the page loads, click on the "Create Graphs for this Host" link at the top of the page.
  # Tick the checkbox at the top right of the list of graph templates.  This should select every graph template that applies to this host but doesn't exist yet.
  # Scroll to the bottom of the page and click the Create button.

If you're upgrading from an earlier version of the template, you might need to change the Host Template to None, submit the change, and then change it back to the desired template after the page reloads.

After you create the graphs, wait until the poller runs once, and then check to make sure your new graphs render as images.