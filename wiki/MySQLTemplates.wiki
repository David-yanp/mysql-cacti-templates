#summary Documentation on the MySQL graphs

This page gives installation instructions specific to the MySQL graph templates, shows examples of graphs in the MySQL template collection, and shows what they do.  You might want to look at http://dev.mysql.com/doc/refman/5.1/en/server-status-variables.html to learn the meaning of the status variables contained in the graphs.

<wiki:toc max_depth="1" />

= Installation Notes =

The MySQL templates work by executing a PHP script that gathers information from MySQL servers and returns it to Cacti.  The script makes an ordinary MySQL connection to gather its input.

It is highly recommended that you use the same MySQL username and password for all servers you want to graph, to ease the installation and configuration.  If you don't, you will need to follow the instructions in InstallingTemplates and CustomizingTemplates to accommodate your installation.

The script requires that you be able to connect to MySQL from your Cacti server.  You can test this with the mysql command-line program.  Debugging MySQL connection problems is beyond the scope of this documentation; refer to the MySQL manual if you have trouble.

To install,

  # Create a MySQL user with the SUPER and PROCESS privileges on each server you want to monitor.  Assuming you use "cacti" and "s3cret" as your username and password, execute the following command on each server: `GRANT SUPER, PROCESS ON *.* TO 'cacti'@'%' IDENTIFIED BY "s3cret";`
    # If you want to monitor replication with mk-heartbeat from the Maatkit toolkit (recommended), you must grant SELECT on the heartbeat table also.  Assuming the mk-heartbeat table is maatkit.heartbeat, execute `GRANT SELECT ON maatkit.heartbeat TO 'cacti'@'%';`
  # Copy ss_get_mysql_stats.php into your Cacti installation's scripts/ directory.
  # All other steps are the same as mentioned in InstallingTemplates.

= graph_image_002.png =

http://sites.google.com/site/bettercactitemplates/Home/graph_image_002.png

= graph_image_003.png =

http://sites.google.com/site/bettercactitemplates/Home/graph_image_003.png

= graph_image_004.png =

http://sites.google.com/site/bettercactitemplates/Home/graph_image_004.png

= graph_image_005.png =

http://sites.google.com/site/bettercactitemplates/Home/graph_image_005.png

= graph_image_006.png =

http://sites.google.com/site/bettercactitemplates/Home/graph_image_006.png

= graph_image_007.png =

http://sites.google.com/site/bettercactitemplates/Home/graph_image_007.png

= graph_image_010.png =

http://sites.google.com/site/bettercactitemplates/Home/graph_image_010.png

= graph_image_011.png =

http://sites.google.com/site/bettercactitemplates/Home/graph_image_011.png

= graph_image_012.png =

http://sites.google.com/site/bettercactitemplates/Home/graph_image_012.png

= graph_image_013.png =

http://sites.google.com/site/bettercactitemplates/Home/graph_image_013.png

= graph_image_014.png =

http://sites.google.com/site/bettercactitemplates/Home/graph_image_014.png

= Replication Status =

http://sites.google.com/site/bettercactitemplates/Home/graph_image_015.png

This graph displays the status of the replication thread.  There are two ways to measure the replication delay:

  # By looking at SHOW SLAVE STATUS's Seconds_behind_master column, which is shown as Secs Behind Master
  # By looking at a heartbeat table such as those supported by [http://www.maatkit.org/doc/mk-heartbeat.html mk-heartbeat].  You must configure the ss_get_mysql_stats.php file to do this.  Examine the comments in the header of the file (TODO: get that documentation online.)

When replication is running, there is an AREA of the same size as the replication delay, colored green.  When it's stopped, there's an AREA of the same size as the replication delay, colored red.  What this means is that you'll see a graph of replication delay, colored in with the appropriate color (green or red) to indicate whether replication was stopped at that moment.  If replication isn't delayed, you won't see any green or red.  If you're using Seconds_behind_master instead of mk-heartbeat to measure delay, it's impossible to measure delay when the slave is stopped, so you won't see any red.  This is one of the many reasons Seconds_behind_master from SHOW SLAVE STATUS is not terribly useful.

The graph also shows open temporary tables and retried transactions.

= graph_image_016.png =

http://sites.google.com/site/bettercactitemplates/Home/graph_image_016.png

= graph_image_017.png =

http://sites.google.com/site/bettercactitemplates/Home/graph_image_017.png

= graph_image_019.png =

http://sites.google.com/site/bettercactitemplates/Home/graph_image_019.png

= graph_image_020.png =

http://sites.google.com/site/bettercactitemplates/Home/graph_image_020.png

= graph_image_021.png =

http://sites.google.com/site/bettercactitemplates/Home/graph_image_021.png

= graph_image_022.png =

http://sites.google.com/site/bettercactitemplates/Home/graph_image_022.png

= graph_image_023.png =

http://sites.google.com/site/bettercactitemplates/Home/graph_image_023.png

= graph_image_024.png =

http://sites.google.com/site/bettercactitemplates/Home/graph_image_024.png

= graph_image_025.png =

http://sites.google.com/site/bettercactitemplates/Home/graph_image_025.png

= graph_image_026.png =

http://sites.google.com/site/bettercactitemplates/Home/graph_image_026.png

= MySQL Processlist =

http://sites.google.com/site/bettercactitemplates/Home/MySQL_Processlist.png

The MySQL Processlist shows the number (count) of queries from SHOW PROCESSLIST in given statuses.  Some of the statuses are lumped together into the "other" category.